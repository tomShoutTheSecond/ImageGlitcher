{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tom\\\\Documents\\\\Repos\\\\ImageGlitcher\\\\image-glitcher\\\\src\\\\ImageProcessor.tsx\";\nimport React from 'react';\nimport { State } from './App';\nimport { Colors } from './Colors';\nimport { Styles } from './Styles';\nimport { Util } from './Util';\nimport { FramePreview } from './FramePreview';\nexport class ImageProcessor extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      previewUrl: \"\"\n    };\n  }\n\n  render() {\n    let containerStyle = {\n      margin: \"16px\",\n      padding: \"16px\",\n      verticalAlign: \"top\",\n      background: Colors.background,\n      borderWidth: 1,\n      borderStyle: \"solid\",\n      borderColor: Colors.border,\n      display: \"inline-block\"\n    };\n    let bigButtonStyle = {\n      color: Colors.accent,\n      background: Colors.fill,\n      border: \"none\",\n      fontSize: \"16px\",\n      padding: \"16px\",\n      float: \"right\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: containerStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: Styles.h1Style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, \"Process Image\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"frames\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }, \"Frames\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"frames\",\n      ref: \"framesInput\",\n      type: \"number\",\n      defaultValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 56\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"boomerang\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, \"Boomerang\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"boomerang\",\n      ref: \"boomerangInput\",\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 62\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"encoding\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, \"Encoding algorithm \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"encoding\",\n      ref: \"encodingInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"mulaw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, \"\\u03BC-law\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"alaw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, \"a-law\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      style: Styles.h2Style,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, \"Amplitude Modulation\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"startFreq\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, \"Start Frequency\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"startFreq\",\n      ref: \"startFreqInput\",\n      type: \"number\",\n      defaultValue: \"0.01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 68\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"endFreq\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, \"End Frequency\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"endFreq\",\n      ref: \"endFreqInput\",\n      type: \"number\",\n      defaultValue: \"0.01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 64\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"startPhase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, \"Start Phase\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"startPhase\",\n      ref: \"startPhaseInput\",\n      type: \"number\",\n      defaultValue: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 65\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"endPhase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, \"End Phase\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"endPhase\",\n      ref: \"endPhaseInput\",\n      type: \"number\",\n      defaultValue: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"startAmp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, \"Start Amp\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"startAmp\",\n      ref: \"startAmpInput\",\n      type: \"number\",\n      defaultValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"endAmp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"End Amp\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"endAmp\",\n      ref: \"endAmpInput\",\n      type: \"number\",\n      defaultValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 57\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"startOffset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"Start DC Offset\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"startOffset\",\n      ref: \"startOffsetInput\",\n      type: \"number\",\n      defaultValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"endOffset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, \"End DC Offset\"), \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"endOffset\",\n      ref: \"endOffsetInput\",\n      type: \"number\",\n      defaultValue: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 66\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      style: bigButtonStyle,\n      onClick: () => this.prepareToProcessAnimation(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, \"Process\"));\n  }\n\n  prepareToProcessAnimation() {\n    //clear downloads area\n    State.clearDownloads();\n    State.setFrameLoadingState(true); //wait to let renderer catch up\n\n    let waitTime = 200;\n    setTimeout(() => this.processAnimation(), waitTime);\n  }\n\n  processAnimation() {\n    let framesInput = this.refs.framesInput;\n    let frames = parseInt(framesInput.value);\n    let boomerangInput = this.refs.boomerangInput;\n    let boomerang = boomerangInput.checked;\n    let startFreqInput = this.refs.startFreqInput;\n    let endFreqInput = this.refs.endFreqInput;\n    let startPhaseInput = this.refs.startPhaseInput;\n    let endPhaseInput = this.refs.endPhaseInput;\n    let startAmpInput = this.refs.startAmpInput;\n    let endAmpInput = this.refs.endAmpInput;\n    let startOffsetInput = this.refs.startOffsetInput;\n    let endOffsetInput = this.refs.endOffsetInput;\n    let startFreq = parseFloat(startFreqInput.value);\n    let endFreq = parseFloat(endFreqInput.value);\n    let startPhase = parseFloat(startPhaseInput.value);\n    let endPhase = parseFloat(endPhaseInput.value);\n    let startAmp = parseFloat(startAmpInput.value);\n    let endAmp = parseFloat(endAmpInput.value);\n    let startOffset = parseFloat(startOffsetInput.value);\n    let endOffset = parseFloat(endOffsetInput.value);\n\n    for (let i = 0; i < frames; i++) {\n      let progress = i / frames;\n      let frameFrequency = Util.mixNumber(startFreq, endFreq, progress);\n      let framePhase = Util.mixNumber(startPhase, endPhase, progress);\n      let frameAmp = Util.mixNumber(startAmp, endAmp, progress);\n      let frameOffset = Util.mixNumber(startOffset, endOffset, progress);\n      this.processFrame(frameFrequency, framePhase, frameAmp, frameOffset);\n    }\n\n    if (boomerang) {\n      for (let i = 0; i < frames; i++) {\n        let progress = 1 - i / frames;\n        let frameFrequency = Util.mixNumber(startFreq, endFreq, progress);\n        let framePhase = Util.mixNumber(startPhase, endPhase, progress);\n        let frameAmp = Util.mixNumber(startAmp, endAmp, progress);\n        let frameOffset = Util.mixNumber(startOffset, endOffset, progress);\n        this.processFrame(frameFrequency, framePhase, frameAmp, frameOffset);\n      }\n    }\n\n    State.setFrameLoadingState(false); //create animation (once image previews are loaded)\n\n    let waitTime = 1000;\n    setTimeout(() => {\n      var _FramePreview$instanc;\n\n      return (_FramePreview$instanc = FramePreview.instance) === null || _FramePreview$instanc === void 0 ? void 0 : _FramePreview$instanc.createGif();\n    }, waitTime);\n  }\n\n  processFrame(frequency, phase, amp, offset) {\n    //get data from file\n    let rawData = this.props.imageData; //decode data\n\n    let decodedFile = this.decodeFile(rawData); //process data\n\n    let processedData = this.bufferProcess(decodedFile, frequency, phase, amp, offset); //encode data\n\n    let encodedFile = this.encodeFile(processedData);\n    this.saveByteArray(encodedFile);\n  }\n\n  encodeFile(rawData) {\n    let encodingInput = this.refs.encodingInput;\n    let encodingAlgorithm = encodingInput.value; //@ts-ignore\n\n    return encodingAlgorithm === \"mulaw\" ? alawmulaw.mulaw.encode(rawData) : alawmulaw.alaw.encode(rawData);\n  }\n\n  decodeFile(rawData) {\n    let encodingInput = this.refs.encodingInput;\n    let encodingAlgorithm = encodingInput.value; //@ts-ignore\n\n    return encodingAlgorithm === \"mulaw\" ? alawmulaw.mulaw.decode(rawData) : alawmulaw.alaw.decode(rawData);\n  }\n\n  bufferProcess(buffer, frequency, phase, amp, offset) {\n    let headerLength = 54;\n    let processedBuffer = [];\n\n    for (let i = 0; i < buffer.length; i++) {\n      const sample = buffer[i];\n\n      if (i < headerLength) {\n        processedBuffer.push(sample);\n        continue;\n      }\n\n      let angle = phase + i * frequency;\n      let coef = offset + Math.sin(angle) * amp;\n      let processedSample = sample * coef;\n      processedBuffer.push(processedSample);\n    }\n\n    return processedBuffer;\n  }\n\n  saveByteArray(data) {\n    let blob = new Blob([data], {\n      type: \"image/bmp\"\n    });\n    let url = window.URL.createObjectURL(blob);\n    State.addDownload(url);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Tom/Documents/Repos/ImageGlitcher/image-glitcher/src/ImageProcessor.tsx"],"names":["React","State","Colors","Styles","Util","FramePreview","ImageProcessor","Component","state","previewUrl","render","containerStyle","margin","padding","verticalAlign","background","borderWidth","borderStyle","borderColor","border","display","bigButtonStyle","color","accent","fill","fontSize","float","h1Style","h2Style","prepareToProcessAnimation","clearDownloads","setFrameLoadingState","waitTime","setTimeout","processAnimation","framesInput","refs","frames","parseInt","value","boomerangInput","boomerang","checked","startFreqInput","endFreqInput","startPhaseInput","endPhaseInput","startAmpInput","endAmpInput","startOffsetInput","endOffsetInput","startFreq","parseFloat","endFreq","startPhase","endPhase","startAmp","endAmp","startOffset","endOffset","i","progress","frameFrequency","mixNumber","framePhase","frameAmp","frameOffset","processFrame","instance","createGif","frequency","phase","amp","offset","rawData","props","imageData","decodedFile","decodeFile","processedData","bufferProcess","encodedFile","encodeFile","saveByteArray","encodingInput","encodingAlgorithm","alawmulaw","mulaw","encode","alaw","decode","buffer","headerLength","processedBuffer","length","sample","push","angle","coef","Math","sin","processedSample","data","blob","Blob","type","url","window","URL","createObjectURL","addDownload"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { State } from './App';\r\nimport { Colors } from './Colors';\r\nimport { Styles } from './Styles';\r\nimport { Util } from './Util';\r\nimport { FramePreview } from './FramePreview';\r\n\r\ninterface ImageProcessorProps\r\n{\r\n    imageData : Uint8Array\r\n}\r\n\r\nexport class ImageProcessor extends React.Component<ImageProcessorProps>\r\n{\r\n    state = { previewUrl: \"\" };\r\n\r\n    render()\r\n    {\r\n        let containerStyle : React.CSSProperties = \r\n        {\r\n            margin: \"16px\",\r\n            padding: \"16px\",\r\n            verticalAlign: \"top\",\r\n            background: Colors.background,\r\n            borderWidth: 1,\r\n            borderStyle: \"solid\",\r\n            borderColor: Colors.border,\r\n            display: \"inline-block\"\r\n        };\r\n\r\n        let bigButtonStyle : React.CSSProperties = \r\n        {\r\n            color: Colors.accent,\r\n            background: Colors.fill,\r\n            border: \"none\",\r\n            fontSize: \"16px\",\r\n            padding: \"16px\",\r\n            float: \"right\"\r\n        };\r\n\r\n        return (\r\n            <div style={containerStyle}>\r\n                <h1 style={Styles.h1Style}>Process Image</h1>\r\n                <label htmlFor=\"frames\">Frames</label> <input id=\"frames\" ref=\"framesInput\" type=\"number\" defaultValue=\"1\"/>\r\n                <br />\r\n                <br />\r\n                <label htmlFor=\"boomerang\">Boomerang</label> <input id=\"boomerang\" ref=\"boomerangInput\" type=\"checkbox\"/>\r\n                <br />\r\n                <br />\r\n                <label htmlFor=\"encoding\">Encoding algorithm </label>\r\n                <select id=\"encoding\" ref=\"encodingInput\">\r\n                    <option value=\"mulaw\">μ-law</option>\r\n                    <option value=\"alaw\">a-law</option>\r\n                </select>\r\n                <br />\r\n                <br />\r\n                <h2 style={Styles.h2Style}>Amplitude Modulation</h2>\r\n                <label htmlFor=\"startFreq\">Start Frequency</label> <input id=\"startFreq\" ref=\"startFreqInput\" type=\"number\" defaultValue=\"0.01\"/>\r\n                <br />\r\n                <label htmlFor=\"endFreq\">End Frequency</label> <input id=\"endFreq\" ref=\"endFreqInput\" type=\"number\" defaultValue=\"0.01\"/>\r\n                <br />\r\n                <br />\r\n                <label htmlFor=\"startPhase\">Start Phase</label> <input id=\"startPhase\" ref=\"startPhaseInput\" type=\"number\" defaultValue=\"0\"/>\r\n                <br />\r\n                <label htmlFor=\"endPhase\">End Phase</label> <input id=\"endPhase\" ref=\"endPhaseInput\" type=\"number\" defaultValue=\"0\"/>\r\n                <br />\r\n                <br />\r\n                <label htmlFor=\"startAmp\">Start Amp</label> <input id=\"startAmp\" ref=\"startAmpInput\" type=\"number\" defaultValue=\"1\"/>\r\n                <br />\r\n                <label htmlFor=\"endAmp\">End Amp</label> <input id=\"endAmp\" ref=\"endAmpInput\" type=\"number\" defaultValue=\"1\"/>\r\n                <br />\r\n                <br />\r\n                <label htmlFor=\"startOffset\">Start DC Offset</label> <input id=\"startOffset\" ref=\"startOffsetInput\" type=\"number\" defaultValue=\"1\"/>\r\n                <br />\r\n                <label htmlFor=\"endOffset\">End DC Offset</label> <input id=\"endOffset\" ref=\"endOffsetInput\" type=\"number\" defaultValue=\"1\"/>\r\n                <br />\r\n                <br />\r\n                <button style={bigButtonStyle} onClick={() => this.prepareToProcessAnimation()}>Process</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    prepareToProcessAnimation()\r\n    {\r\n        //clear downloads area\r\n        State.clearDownloads();\r\n        State.setFrameLoadingState(true);\r\n\r\n        //wait to let renderer catch up\r\n        let waitTime = 200;\r\n        setTimeout(() => this.processAnimation(), waitTime);\r\n    }\r\n\r\n    processAnimation()\r\n    {\r\n        let framesInput = this.refs.framesInput as HTMLInputElement;\r\n        let frames = parseInt(framesInput.value);\r\n\r\n        let boomerangInput = this.refs.boomerangInput as HTMLInputElement;\r\n        let boomerang = boomerangInput.checked;\r\n\r\n        let startFreqInput = this.refs.startFreqInput as HTMLInputElement;\r\n        let endFreqInput = this.refs.endFreqInput as HTMLInputElement;\r\n        let startPhaseInput = this.refs.startPhaseInput as HTMLInputElement;\r\n        let endPhaseInput = this.refs.endPhaseInput as HTMLInputElement;\r\n        let startAmpInput = this.refs.startAmpInput as HTMLInputElement;\r\n        let endAmpInput = this.refs.endAmpInput as HTMLInputElement;\r\n        let startOffsetInput = this.refs.startOffsetInput as HTMLInputElement;\r\n        let endOffsetInput = this.refs.endOffsetInput as HTMLInputElement;\r\n\r\n        let startFreq = parseFloat(startFreqInput.value);\r\n        let endFreq = parseFloat(endFreqInput.value);\r\n        let startPhase = parseFloat(startPhaseInput.value);\r\n        let endPhase = parseFloat(endPhaseInput.value);\r\n        let startAmp = parseFloat(startAmpInput.value);\r\n        let endAmp = parseFloat(endAmpInput.value);\r\n        let startOffset = parseFloat(startOffsetInput.value);\r\n        let endOffset = parseFloat(endOffsetInput.value);\r\n\r\n        for (let i = 0; i < frames; i++) \r\n        {\r\n            let progress = i / frames;\r\n            let frameFrequency = Util.mixNumber(startFreq, endFreq, progress);\r\n            let framePhase = Util.mixNumber(startPhase, endPhase, progress);\r\n            let frameAmp = Util.mixNumber(startAmp, endAmp, progress);\r\n            let frameOffset = Util.mixNumber(startOffset, endOffset, progress);\r\n\r\n            this.processFrame(frameFrequency, framePhase, frameAmp, frameOffset);\r\n        }\r\n\r\n        if(boomerang)\r\n        {\r\n            for (let i = 0; i < frames; i++) \r\n            {\r\n                let progress = 1 - (i / frames);\r\n                let frameFrequency = Util.mixNumber(startFreq, endFreq, progress);\r\n                let framePhase = Util.mixNumber(startPhase, endPhase, progress);\r\n                let frameAmp = Util.mixNumber(startAmp, endAmp, progress);\r\n                let frameOffset = Util.mixNumber(startOffset, endOffset, progress);\r\n\r\n                this.processFrame(frameFrequency, framePhase, frameAmp, frameOffset);\r\n            }\r\n        }\r\n\r\n        State.setFrameLoadingState(false);\r\n\r\n        //create animation (once image previews are loaded)\r\n        let waitTime = 1000;\r\n        setTimeout(() => FramePreview.instance?.createGif(), waitTime);\r\n    }\r\n\r\n    processFrame(frequency : number, phase : number, amp : number, offset : number)\r\n    {\r\n        //get data from file\r\n        let rawData = this.props.imageData;\r\n        \r\n        //decode data\r\n        let decodedFile = this.decodeFile(rawData);\r\n\r\n        //process data\r\n        let processedData = this.bufferProcess(decodedFile, frequency, phase, amp, offset);\r\n\r\n        //encode data\r\n        let encodedFile = this.encodeFile(processedData);\r\n        \r\n        this.saveByteArray(encodedFile);\r\n    }\r\n\r\n    encodeFile(rawData : number[])\r\n    {\r\n        let encodingInput = this.refs.encodingInput as HTMLInputElement;\r\n        let encodingAlgorithm = encodingInput.value;\r\n\r\n        //@ts-ignore\r\n        return encodingAlgorithm === \"mulaw\" ? alawmulaw.mulaw.encode(rawData) : alawmulaw.alaw.encode(rawData);\r\n    }\r\n\r\n    decodeFile(rawData : Uint8Array)\r\n    {\r\n        let encodingInput = this.refs.encodingInput as HTMLInputElement;\r\n        let encodingAlgorithm = encodingInput.value;\r\n\r\n        //@ts-ignore\r\n        return encodingAlgorithm === \"mulaw\" ? alawmulaw.mulaw.decode(rawData) : alawmulaw.alaw.decode(rawData);\r\n    }\r\n\r\n    bufferProcess(buffer : any, frequency : number, phase : number, amp : number, offset : number)\r\n    {\r\n        let headerLength = 54;\r\n\r\n        let processedBuffer = [];\r\n        for (let i = 0; i < buffer.length; i++) \r\n        {\r\n            const sample = buffer[i];\r\n\r\n            if(i < headerLength)\r\n            {\r\n                processedBuffer.push(sample);\r\n                continue;\r\n            }\r\n\r\n            let angle = phase + i * frequency;\r\n            let coef = offset + Math.sin(angle) * amp;\r\n\r\n            let processedSample = sample * coef;\r\n            processedBuffer.push(processedSample);\r\n        }\r\n\r\n        return processedBuffer;\r\n    }\r\n\r\n    saveByteArray(data : any)\r\n    {\r\n        let blob = new Blob([data], {type: \"image/bmp\"});\r\n        let url = window.URL.createObjectURL(blob);\r\n\r\n        State.addDownload(url);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}