(this["webpackJsonpimage-glitcher"]=this["webpackJsonpimage-glitcher"]||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),i=a.n(l),o=(a(12),a(3)),s=a(4),u=a(1),c=a(2),m=function e(){Object(u.a)(this,e)};m.background="#CACACA",m.border="#999",m.accent="#fff",m.fill="#222";var d=function e(){Object(u.a)(this,e)};d.h1Style={padding:0,margin:"0 0 16px 0"},d.h2Style={fontSize:"20px",padding:0,margin:"0 0 16px 0"},d.imageStyle={maxWidth:240,maxHeight:240};var p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={previewUrl:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={margin:"16px",padding:"16px",verticalAlign:"top",background:m.background,borderWidth:1,borderStyle:"solid",borderColor:m.border,display:"inline-block"};return r.a.createElement("div",{style:t},r.a.createElement("h1",{style:d.h1Style},"Load Image"),r.a.createElement("p",null,".bmp files only"),r.a.createElement("div",{style:{paddingBottom:"16px"}},r.a.createElement("input",{ref:"fileInput",type:"file",id:"files",name:"file",onChange:function(){return e.loadImage()}})),r.a.createElement("img",{src:this.state.previewUrl,style:d.imageStyle}))}},{key:"loadImage",value:function(){var e=this,t=this.refs.fileInput.files[0],a=new FileReader;a.readAsArrayBuffer(t),a.onloadend=function(){var n=a.result,r=new Uint8Array(n);v.setImageData(r),a.readAsDataURL(t),a.onloadend=function(){e.setState({previewUrl:a.result})}}}}]),a}(r.a.Component),f=function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,null,[{key:"mixNumber",value:function(e,t,a){return e*a+t*(1-a)}}]),e}(),h=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){a.instance=this}},{key:"render",value:function(){var e=this,t={margin:"16px",padding:"16px",verticalAlign:"top",background:m.background,borderWidth:1,borderStyle:"solid",borderColor:m.border},a={display:"inline-block"},n=this.props.isLoading?"Loading frames...":this.props.downloads.map((function(e,t){return r.a.createElement("div",{key:t,style:a},r.a.createElement("img",{className:"downloadImg",src:e,style:d.imageStyle}),r.a.createElement("a",{href:e,download:"image.bmp"},"image-"+t))}));return r.a.createElement("div",{style:t},r.a.createElement("h1",{style:d.h1Style},"Frames"),n,r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.createGif()}},"Convert to GIF"))}},{key:"createGif",value:function(){var e=this;v.setAnimationLoadingState(!0);var t=new Image;t.onload=function(){var a=t.width,n=t.height,r=new GIF({workers:2,quality:10,width:a,height:n});e.getImageElements().forEach((function(e){r.addFrame(e,{delay:10})})),r.on("finished",(function(e){var t=URL.createObjectURL(e);v.setAnimationUrl(t),v.setAnimationLoadingState(!1)})),r.render()};var a=this.getImageElements()[0];t.src=a.src}},{key:"getImageElements",value:function(){var e=i.a.findDOMNode(this);return Array.from(e.getElementsByClassName("downloadImg"))}}]),a}(r.a.Component);h.instance=null;var b=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={previewUrl:""},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t={margin:"16px",padding:"16px",verticalAlign:"top",background:m.background,borderWidth:1,borderStyle:"solid",borderColor:m.border,display:"inline-block"},a={color:m.accent,background:m.fill,border:"none",fontSize:"16px",padding:"16px",float:"right"};return r.a.createElement("div",{style:t},r.a.createElement("h1",{style:d.h1Style},"Process Image"),r.a.createElement("label",{htmlFor:"frames"},"Frames")," ",r.a.createElement("input",{id:"frames",ref:"framesInput",type:"number",defaultValue:"1"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"boomerang"},"Boomerang")," ",r.a.createElement("input",{id:"boomerang",ref:"boomerangInput",type:"checkbox"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"encoding"},"Encoding algorithm "),r.a.createElement("select",{id:"encoding",ref:"encodingInput"},r.a.createElement("option",{value:"mulaw"},"\u03bc-law"),r.a.createElement("option",{value:"alaw"},"a-law")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{style:d.h2Style},"Amplitude Modulation"),r.a.createElement("label",{htmlFor:"startFreq"},"Start Frequency")," ",r.a.createElement("input",{id:"startFreq",ref:"startFreqInput",type:"number",defaultValue:"0.01"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"endFreq"},"End Frequency")," ",r.a.createElement("input",{id:"endFreq",ref:"endFreqInput",type:"number",defaultValue:"0.01"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"startPhase"},"Start Phase")," ",r.a.createElement("input",{id:"startPhase",ref:"startPhaseInput",type:"number",defaultValue:"0"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"endPhase"},"End Phase")," ",r.a.createElement("input",{id:"endPhase",ref:"endPhaseInput",type:"number",defaultValue:"0"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"startAmp"},"Start Amp")," ",r.a.createElement("input",{id:"startAmp",ref:"startAmpInput",type:"number",defaultValue:"1"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"endAmp"},"End Amp")," ",r.a.createElement("input",{id:"endAmp",ref:"endAmpInput",type:"number",defaultValue:"1"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"startOffset"},"Start DC Offset")," ",r.a.createElement("input",{id:"startOffset",ref:"startOffsetInput",type:"number",defaultValue:"1"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"endOffset"},"End DC Offset")," ",r.a.createElement("input",{id:"endOffset",ref:"endOffsetInput",type:"number",defaultValue:"1"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{style:a,onClick:function(){return e.prepareToProcessAnimation()}},"Process"))}},{key:"prepareToProcessAnimation",value:function(){var e=this;v.clearDownloads(),v.setFrameLoadingState(!0);setTimeout((function(){return e.processAnimation()}),200)}},{key:"processAnimation",value:function(){for(var e=this.refs.framesInput,t=parseInt(e.value),a=this.refs.boomerangInput.checked,n=this.refs.startFreqInput,r=this.refs.endFreqInput,l=this.refs.startPhaseInput,i=this.refs.endPhaseInput,o=this.refs.startAmpInput,s=this.refs.endAmpInput,u=this.refs.startOffsetInput,c=this.refs.endOffsetInput,m=parseFloat(n.value),d=parseFloat(r.value),p=parseFloat(l.value),b=parseFloat(i.value),g=parseFloat(o.value),y=parseFloat(s.value),E=parseFloat(u.value),w=parseFloat(c.value),k=0;k<t;k++){var I=k/t,F=f.mixNumber(m,d,I),A=f.mixNumber(p,b,I),O=f.mixNumber(g,y,I),S=f.mixNumber(E,w,I);this.processFrame(F,A,O,S)}if(a)for(var j=0;j<t;j++){var x=1-j/t,L=f.mixNumber(m,d,x),C=f.mixNumber(p,b,x),D=f.mixNumber(g,y,x),P=f.mixNumber(E,w,x);this.processFrame(L,C,D,P)}v.setFrameLoadingState(!1);setTimeout((function(){var e;return null===(e=h.instance)||void 0===e?void 0:e.createGif()}),1e3)}},{key:"processFrame",value:function(e,t,a,n){var r=this.props.imageData,l=this.decodeFile(r),i=this.bufferProcess(l,e,t,a,n),o=this.encodeFile(i);this.saveByteArray(o)}},{key:"encodeFile",value:function(e){return"mulaw"===this.refs.encodingInput.value?alawmulaw.mulaw.encode(e):alawmulaw.alaw.encode(e)}},{key:"decodeFile",value:function(e){return"mulaw"===this.refs.encodingInput.value?alawmulaw.mulaw.decode(e):alawmulaw.alaw.decode(e)}},{key:"bufferProcess",value:function(e,t,a,n,r){for(var l=[],i=0;i<e.length;i++){var o=e[i];if(i<54)l.push(o);else{var s=a+i*t,u=o*(r+Math.sin(s)*n);l.push(u)}}return l}},{key:"saveByteArray",value:function(e){var t=new Blob([e],{type:"image/bmp"}),a=window.URL.createObjectURL(t);v.addDownload(a)}}]),a}(r.a.Component),g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e={margin:"16px",padding:"16px",verticalAlign:"top",background:m.background,borderWidth:1,borderStyle:"solid",borderColor:m.border,display:"inline-block"},t=this.props.isLoading||""==this.props.url?null:r.a.createElement("a",{href:this.props.url},"Download"),a=this.props.isLoading?"Loading animation...":r.a.createElement("img",{style:d.imageStyle,src:this.props.url});return r.a.createElement("div",{style:e},r.a.createElement("h1",{style:d.h1Style},"Animation"),a,t)}}]),a}(r.a.Component),v=function(){function e(){Object(u.a)(this,e)}return Object(c.a)(e,null,[{key:"setImageData",value:function(e){this.app.setState({imageData:e})}},{key:"addDownload",value:function(e){var t=this.app.state.downloads;t.push(e),this.app.setState({downloads:t})}},{key:"clearDownloads",value:function(){this.app.state.downloads.length=0}},{key:"setAnimationUrl",value:function(e){this.app.setState({animationUrl:e})}},{key:"setAnimationLoadingState",value:function(e){this.app.setState({animationIsLoading:e})}},{key:"setFrameLoadingState",value:function(e){this.app.setState({frameIsLoading:e})}}]),e}();v.app=void 0;var y=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={imageData:new Uint8Array,downloads:[],animationUrl:"",frameIsLoading:!1,animationIsLoading:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){v.app=this}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"16px"}},r.a.createElement(p,null),r.a.createElement(b,{imageData:this.state.imageData}),r.a.createElement(g,{url:this.state.animationUrl,isLoading:this.state.animationIsLoading}),r.a.createElement(h,{downloads:this.state.downloads,isLoading:this.state.frameIsLoading}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.a0a2b059.chunk.js.map